---
interface Props {
  title: string;
  date: string;
  time?: string;
  description: string;
  image?: string;
  badge?: string;
  href?: string;
}

const {
  title,
  date,
  time,
  description,
  image,
  badge,
  href
} = Astro.props;

const base = import.meta.env.BASE_URL;

// Format date
const dateObj = new Date(date);
const formattedDate = dateObj.toLocaleDateString("fr-FR", {
  weekday: "long",
  day: "numeric",
  month: "long"
});
---

<article class="card-hover group">
  {image && (
    <div class="relative -mx-6 -mt-6 mb-4 overflow-hidden rounded-t-2xl">
      <img
        src={`${base}/${image}`}
        alt={title}
        loading="lazy"
        decoding="async"
        class="w-full aspect-video object-cover transition-transform duration-500 group-hover:scale-105"
      />
      {badge && (
        <span class="absolute top-3 left-3 badge-terracotta">
          {badge}
        </span>
      )}
    </div>
  )}

  <div class="space-y-2">
    <div class="flex items-center gap-2 text-sm text-charcoal/60">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>
      <time datetime={date} class="capitalize">{formattedDate}</time>
      {time && (
        <>
          <span class="text-charcoal/30">â€¢</span>
          <span>{time}</span>
        </>
      )}
    </div>

    <h3 class="font-display text-xl font-semibold text-charcoal group-hover:text-olive transition-colors">
      {href ? (
        <a href={href} class="hover:underline underline-offset-2">
          {title}
        </a>
      ) : (
        title
      )}
    </h3>

    <p class="text-charcoal/70 line-clamp-2">{description}</p>
  </div>
</article>
